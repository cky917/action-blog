(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{232:function(s,e,a){"use strict";a.r(e);var n=a(2),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("每次在本地跑Node项目自娱自乐总不是很爽，一直想把自己的node项目部署到服务器上。但是我对于后端和运维知识我还是处于小白阶段，今天研究了一下午，总算是成功把自己的node项目搞了上去，又学到了新姿势。本文将介绍怎么从零开始，获得服务器，并将node项目通过github+pm2部署到远程服务器。\n")]),s._v(" "),a("h3",{attrs:{id:"服务器环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器环境搭建"}},[s._v("#")]),s._v(" 服务器环境搭建")]),s._v(" "),a("h4",{attrs:{id:"购买服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#购买服务器"}},[s._v("#")]),s._v(" 购买服务器")]),s._v(" "),a("p",[s._v("(已有服务器的可以跳过此步骤)。\n我是用的腾讯的云服务器，因为腾讯云还是比较良心，云服务器开放了免费体验功能（不知道之后会不会关闭），很适合我们这种新手先试用再购买。通过这个【"),a("a",{attrs:{href:"https://www.qcloud.com/act/try?t=cvm",target:"_blank",rel:"noopener noreferrer"}},[s._v("链接"),a("OutboundLink")],1),s._v("】申请了免费试用。申请成功后，就会收到该改主机的信息。我选择的1核CPU、1GB内存,系统为CentOS 7.2 64位。也许在你看到这篇文章的时候，服务器也过期了- -")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("现在我换成了国外的vps 便宜好用还能翻墙 嚯嚯嚯。")]),s._v(" "),a("h4",{attrs:{id:"登录云服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录云服务器"}},[s._v("#")]),s._v(" 登录云服务器")]),s._v(" "),a("p",[s._v("在本机终端输入以下命令即可连接上云服务器，然后需要输入给你的初始密码。\n"),a("code",[s._v("ssh root@服务器公网ip")])]),s._v(" "),a("h4",{attrs:{id:"安装相关文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装相关文件"}},[s._v("#")]),s._v(" 安装相关文件")]),s._v(" "),a("p",[s._v("更新yum（云服务器自带的包管理工具）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum update -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("更新完毕后，安装Node.js：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install nodejs -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装Npm：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install npm -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装pm2：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install pm2 -g\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("分别执行"),a("code",[s._v("node -v")]),s._v("、"),a("code",[s._v("npm -v")]),s._v("、"),a("code",[s._v("pm2 -v")]),s._v("查看是否安装成功，如果没有安装成功，前面加上"),a("code",[s._v("sudo")]),s._v("命令重试")]),s._v(" "),a("h4",{attrs:{id:"服务器端创建新用户（可选）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器端创建新用户（可选）"}},[s._v("#")]),s._v(" 服务器端创建新用户（可选）")]),s._v(" "),a("p",[s._v("为服务器安全起见，创建用户(用户名：yourName)：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("useradd yourName\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("设置密码：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("passwd yourName\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("添加sudo权限：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("usermod -aG wheel yourName\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"服务器端关闭root用户的ssh访问-可选-："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器端关闭root用户的ssh访问-可选-："}},[s._v("#")]),s._v(" 服务器端关闭root用户的ssh访问(可选)：")]),s._v(" "),a("p",[s._v("为服务器安全起见，关闭root账户的远程访问。\n打开配置文件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vi /etc/ssh/sshd_config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("按下"),a("code",[s._v("i")]),s._v(",切换vi为输入状态\n找到如下设置，删除前面的"),a("code",[s._v("#")]),s._v("，并修改yes为no：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("PermitRootLogin no\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("按下"),a("code",[s._v("esc")]),s._v("，切换vi为命令状态，然后输入"),a("code",[s._v(":wq")]),s._v("回车保存退出\n保存文件后，重启sshd服务：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service sshd restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("退出root账户，并使用新创建用户访问。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ssh yourName@服务器公网ip\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"环境说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境说明"}},[s._v("#")]),s._v(" 环境说明")]),s._v(" "),a("p",[s._v("本文的操作环境是\n本地：Mac OSX"),a("br"),s._v("\n远端服务器：腾讯云ECS（1核CPU、1GB内存），IP：119.29.101.229，系统为CentOS 7.2 64位\n采用的技术：Node.js + Express.js\nGithub：账户名：cky917\n以下命令全部带入我的账号，"),a("strong",[s._v("自己使用时记得替换为自己的账号")]),s._v("。\n本文对于Git基本操作和node也不做详细讲解。")]),s._v(" "),a("h3",{attrs:{id:"本地创建node项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地创建node项目"}},[s._v("#")]),s._v(" 本地创建node项目")]),s._v(" "),a("p",[s._v("具体如何创建，本文不详细讨论。假设已经建立好一个名为pm2Demo的项目。")]),s._v(" "),a("h3",{attrs:{id:"github建立链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github建立链接"}},[s._v("#")]),s._v(" github建立链接")]),s._v(" "),a("p",[s._v("登录云服务器，安装git，生成ssh-key。然后将云服务器的ssh-key加到自己的github中。\n在本地执行同样的操作。")]),s._v(" "),a("p",[s._v("进入本地项目目录./pm2Demo，将本地项目与github远程仓库建立连接。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("git remote add origin https://github.com/cky917/pm2Demo.git\ngit push -u origin master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"pm2部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pm2部署"}},[s._v("#")]),s._v(" pm2部署")]),s._v(" "),a("p",[s._v("pm2的介绍可以看看这篇"),a("a",{attrs:{href:"https://segmentfault.com/a/1190000002539204",target:"_blank",rel:"noopener noreferrer"}},[s._v("文章"),a("OutboundLink")],1),s._v("\n详细的部署步骤也可以看"),a("a",{attrs:{href:"http://pm2.keymetrics.io/docs/usage/deployment/#considerations",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方配置文档"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("本地安装pm2之后执行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pm2 ecosystem\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("会生成一个ecosystem.config.js(版本原因，也可能是ecosystem.json)文件，打开该文件进行配置。修改"),a("code",[s._v("script")]),s._v("配置为node项目启动文件。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('apps : [\n    //由于我们此次只有一个项目,我们只配置一个app\n    {\n      name      : "pm2Demo",\n      script    : "./bin/www",\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("其余关于app部分的配置，可见"),a("a",{attrs:{href:"http://pm2.keymetrics.io/docs/usage/application-declaration/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1),s._v(";")]),s._v(" "),a("p",[s._v("再配置部署部分：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('deploy : {\n    production : {//生产环境部署配置\n      user : "cky",//登录远程服务器的用户名\n      host : "119.29.101.229",//远程服务器的IP或hostname，此处可以是数组同步部署多个服务器\n      ref  : "origin/master",//远端名称及分支名\n      repo : "git@github.com:cky917/pm2Demo.git",//git仓库地址\n      path : "/home/cky/www/production/pm2Demo",//远程服务器部署目录，需要填写user具备写入权限的目录\n      "post-deploy" : "npm install && pm2 startOrRestart ecosystem.config.js --env production",//部署后需要执行的命令\n      "env"  : {\n        "NODE_ENV": "production"\n      }\n    },\n    dev : {//开发环境部署配置\n      user : "cky",\n      host : "119.29.101.229",\n      ref  : "origin/dev",\n      repo : "git@github.com:cky917/pm2Demo.git",\n      path : "/home/cky/www/dev/pm2Demo",\n      "post-deploy" : "npm install && pm2 startOrRestart ecosystem.config.js --env dev",\n      env  : {\n        NODE_ENV: "dev"\n      }\n    }\n  }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[s._v("上面的代码我们部署了2个环境，当然你得有对应的分支。\n改好后，我们将ecosystem.config.js代码提交到远程github仓库去，")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('git add .\ngit commit -m "update ecosystem"\ngit push\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("在云服务器端执行以下命令，将"),a("code",[s._v("http://github.com")]),s._v("加入known_hosts：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ssh-keyscan -t rsa github.com >> ~/.ssh/known_hosts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("因为pm2的部署是通过ssh进行的，因此需要开通本地到远程服务器的无密码登录，同样，在Mac下，通过ssh-keygen生成RSA公钥，并拷贝到远程服务器：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("scp ~/.ssh/id_rsa.pub cky@119.29.101.229:/home/cky/.ssh/authorized_keys\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在本地执行命令把文件目录初始化到服务器端：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pm2 deploy <configuration_file> <environment> setup\n//比如：\npm2 deploy ecosystem.config.js production setup\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("如果没有问题，会输出")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  ...\n  ○ setup complete\n--\x3e Success\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"一键部署代码到服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一键部署代码到服务器"}},[s._v("#")]),s._v(" 一键部署代码到服务器")]),s._v(" "),a("p",[s._v("在本地./pm2Demo项目下，输入以下命令部署代码到服务器")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pm2 deploy ecosystem.config.js production\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("会看到输出以下信息，表示部署成功：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" Use `pm2 show <id|name>` to get more details about an app\n  ○ hook test\n  ○ successfully deployed origin/master\n--\x3e Success\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("现在，你的代码已经被部署，而且项目也启动了。\npm2部署命令列表如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('pm2 deploy <configuration_file> <environment> <command>\n  Commands:\n    setup                run remote setup commands\n    update               update deploy to the latest release\n    revert [n]           revert to [n]th last deployment or 1\n    curr[ent]            output current release commit\n    prev[ious]           output previous release commit\n    exec|run <cmd>       execute the given <cmd>\n    list                 list previous deploy commits\n    [ref]                deploy to [ref], the "ref" setting, or latest tag\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("在这里我发现了一个问题，就是如果我的分支代码更新了，我执行部署更新命令拉取的提交记录还是初始化时的提交记录，我必须删掉服务器上的文件夹，重新执行初始化和部署的操作，不知道是本来就这样还是哪里出了问题，暂时没找到原因- -。")]),s._v(" "),a("p",[s._v("部署成功后，在远程服务器端输入"),a("code",[s._v("netstat -antp")]),s._v("查看端口情况。可以看到3000端口已经可以访问。\n输入http://119.29.101.229:3000/ 就能访问到项目了（我把我简陋的毕设项目搞了上去 - -,管理员账户root,密码123 有兴趣可以登录试一下）")]),s._v(" "),a("h3",{attrs:{id:"设置开机自动启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自动启动"}},[s._v("#")]),s._v(" 设置开机自动启动")]),s._v(" "),a("p",[s._v("可以通过pm2 startup来实现开机自启动。细节可"),a("a",{attrs:{href:"http://pm2.keymetrics.io/docs/usage/startup/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考"),a("OutboundLink")],1),s._v("。大致流程如下")]),s._v(" "),a("ol",[a("li",[s._v("通过"),a("code",[s._v("pm2 save")]),s._v("保存当前进程状态。")]),s._v(" "),a("li",[s._v("通过"),a("code",[s._v("pm2 startup [platform]")]),s._v("生成开机自启动的命令。（记得查看控制台输出）")]),s._v(" "),a("li",[s._v("将步骤2生成的命令，粘贴到控制台进行，搞定。")])]),s._v(" "),a("h3",{attrs:{id:"nginx反向代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx反向代理"}},[s._v("#")]),s._v(" nginx反向代理")]),s._v(" "),a("p",[s._v("通过nginx反向代理，可以让服务器上某端口，指向指定域名的80端口，这样访问时就不需要加端口号了。\n详细见"),a("a",{attrs:{href:"http://pm2.keymetrics.io/docs/tutorials/pm2-nginx-production-setup",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1),s._v("\n首先我们要在云服务器上安装nginx:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装成功后，启动nginx服务：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service nginx start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("使用命令"),a("code",[s._v("nginx -t")]),s._v("查找nginx配置文件，并使用vi命令修改该配置文件。\n我的配置如下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("user nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /run/nginx.pid;\n# Load dynamic modules. See /usr/share/nginx/README.dynamic.\ninclude /usr/share/nginx/modules/*.conf;\nevents {\n    worker_connections 1024;\n}\nhttp {\n  upstream my_nodejs_upstream {\n    server 127.0.0.1:3000;\n    keepalive 64;\n  }\n  server {\n    listen 80;\n    server_name   www.chenkeyi.com;//你的域名\n    access_log  /var/log/nginx/bysj.log;\n    error_log /var/log/nginx/bysj.error.log;\n    location / {\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-NginX-Proxy true;\n        proxy_http_version 1.1;\n        proxy_pass http://my_nodejs_upstream/;\n    }\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[s._v("改完后"),a("code",[s._v("service nginx restart")]),s._v("重启nginx")]),s._v(" "),a("h3",{attrs:{id:"解析域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解析域名"}},[s._v("#")]),s._v(" 解析域名")]),s._v(" "),a("p",[s._v("这个在腾讯云和阿里云等都提供解析域名服务。")]),s._v(" "),a("p",[s._v("配置成功："),a("a",{attrs:{href:"http://bysj.chenkeyi.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("bysj.chenkeyi.com"),a("OutboundLink")],1),s._v("可以访问。")])])}),[],!1,null,null,null);e.default=t.exports}}]);